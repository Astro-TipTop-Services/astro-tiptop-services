"use strict";(self.webpackChunktiptop_site=self.webpackChunktiptop_site||[]).push([[8978],{6911:(e,r,n)=>{n.r(r),n.d(r,{assets:()=>l,contentTitle:()=>p,default:()=>m,frontMatter:()=>a,metadata:()=>t,toc:()=>c});const t=JSON.parse('{"id":"orion/useful_scripts","title":"Useful Scripts & Companion Tools","description":"This section offers external tools and scripts developed","source":"@site/docs/orion/useful_scripts.mdx","sourceDirName":"orion","slug":"/orion/useful_scripts","permalink":"/astro-tiptop-services/docs/orion/useful_scripts","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"id":"useful_scripts","title":"Useful Scripts & Companion Tools","sidebar_label":"Useful Scripts & Companion Tools"},"sidebar":"tipTopSidebar","previous":{"title":"Interactive tools \u2013 Generate Input Files & Convert Parameters","permalink":"/astro-tiptop-services/docs/orion/interactivetools"},"next":{"title":"Parameter files explained","permalink":"/astro-tiptop-services/docs/orion/parameterfiles"}}');var i=n(4848),o=n(8453),s=n(9030);const a={id:"useful_scripts",title:"Useful Scripts & Companion Tools",sidebar_label:"Useful Scripts & Companion Tools"},p=void 0,l={},c=[{value:"Running <i>N</i> <strong>TipTop</strong> simulations with different parameter values",id:"running-n-tiptop-simulations-with-different-parameter-values",level:2}];function u(e){const r={code:"code",h2:"h2",p:"p",pre:"pre",strong:"strong",...(0,o.R)(),...e.components},{Details:n}=r;return n||function(e,r){throw new Error("Expected "+(r?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Details",!0),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(r.p,{children:["This section offers external tools and scripts developed\r\nto extend functionality, enhance, or automate ",(0,i.jsx)(r.strong,{children:"TipTop"})," workflows."]}),"\n",(0,i.jsxs)(r.h2,{id:"running-n-tiptop-simulations-with-different-parameter-values",children:["Running ",(0,i.jsx)("i",{children:"N"})," ",(0,i.jsx)(r.strong,{children:"TipTop"})," simulations with different parameter values"]}),"\n",(0,i.jsxs)(r.p,{children:["Here, we provide an example script to run ",(0,i.jsx)("i",{children:"N"})," ",(0,i.jsx)(r.strong,{children:"TipTop"})," simulations with different values of two parameters:\r\n",(0,i.jsx)(r.code,{children:"ZenithAngle"})," and ",(0,i.jsx)(r.code,{children:"Seeing"}),". The script can easily be adapted to modify only one parameter or more than two parameters."]}),"\n",(0,i.jsxs)(r.p,{children:["The full example script is available for download\r\n",(0,i.jsxs)("a",{href:`${(0,s.Ay)("/downloads/TIPTOP_RUN_N_SIM.py")}`,download:"TIPTOP_RUN_N_SIM.py",children:[(0,i.jsx)(r.strong,{children:"here"}),(0,i.jsx)("span",{style:{fontSize:"1.5em"},children:"\ud83d\udce5"})]}),"."]}),"\n",(0,i.jsxs)(n,{children:[(0,i.jsx)("summary",{children:(0,i.jsxs)("strong",{children:[" Running ",(0,i.jsx)("i",{children:"N"})," ",(0,i.jsx)(r.strong,{children:"TipTop"})," simulations: ",(0,i.jsx)(r.code,{children:"TIPTOP_RUN_N_SIM.py"})," "]})}),(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-python",children:'"""\r\nCreated on Wed Jul 10 10:00:34 2025\r\nRun N TIPTOP simulations by sweeping over different parameter values.\r\n\r\n@author: astro-tiptop-services\r\n"""\r\n\r\n#%% =============================================================================\r\n# Import necessary libraries\r\nfrom tiptop.tiptop import overallSimulation\r\nimport numpy as np\r\nimport configparser\r\nfrom itertools import product\r\nimport os\r\n\r\n#%% =============================================================================\r\n# === File Paths ===\r\n#\ud83d\udca1 Adapt these paths to your environment\r\ninputDir = "../MICADO/"   # Folder containing the .ini parameter file\r\ninTag = "MICADO_SCAO"     # Name of the input parameter file (without extension)\r\noutputDir = "./"          # Folder where the output FITS files will be saved \r\ntempDir = inputDir        # Temporary folder for modified .ini files\r\ntempName = \'file_temp\'    # Name of the temporary file\r\n\r\n# Construct the full path to the input and temporary config files\r\ninputFile = os.path.join(inputDir, f"{inTag}.ini")\r\ntempFile = os.path.join(tempDir, f"{tempName}.ini")\r\n\r\n# Base name for output files\r\noutTagBase = "MICADO"\r\n\r\n#%% =============================================================================\r\n# === Define parameters to sweep ===\r\n# Format: (section_name, key_name, list_of_values : min, max, number of values)\r\n\r\nparam_sweep = [\r\n  ("atmosphere", "Seeing", np.linspace(0.8, 2.0, 3)),\r\n  ("telescope", "ZenithAngle", np.linspace(0.0, 60.0, 3)),\r\n  # Add more parameters as needed\r\n]\r\n\r\n#%% =============================================================================\r\n# === Read base configuration file ===\r\nparser = configparser.ConfigParser()\r\nparser.optionxform = str # Keep the original case of parameter keys\r\nparser.read(inputFile)\r\n\r\n#%% =============================================================================\r\n# === Build and run combinations ===\r\n\r\n# Extract parameter names and values\r\nparam_names = [f"{sec}.{key}" for sec, key, _ in param_sweep]\r\nparam_values = [vals for _, _, vals in param_sweep]\r\n\r\n# Generate all combinations\r\nfor combo in product(*param_values):\r\n  # Update .ini with current parameter values\r\n  for (section, key, _), value in zip(param_sweep, combo):\r\n      parser.set(section, key, str(value))\r\n            \r\n      # Write updated config to temporary .ini file\r\n      with open(tempFile, "w") as configfile:\r\n          parser.write(configfile)\r\n      \r\n      # Build output file tag\r\n      tag_parts = [f"{name.split(\'.\')[-1]}{val:.2f}" for name, val in zip(param_names, combo)]\r\n      tag = f"{outTagBase}_{\'_\'.join(tag_parts)}"\r\n      \r\n      print(f"\ud83d\udd04 Running simulation with: {dict(zip(param_names, combo))}")\r\n      \r\n      # Run TipTop simulation\r\n      overallSimulation(\r\n          path2param=tempDir,\r\n          parametersFile=tempName,\r\n          outputDir=outputDir,\r\n          outputFile=tag,\r\n          addSrAndFwhm=True\r\n      )\n'})})]})]})}function m(e={}){const{wrapper:r}={...(0,o.R)(),...e.components};return r?(0,i.jsx)(r,{...e,children:(0,i.jsx)(u,{...e})}):u(e)}},8453:(e,r,n)=>{n.d(r,{R:()=>s,x:()=>a});var t=n(6540);const i={},o=t.createContext(i);function s(e){const r=t.useContext(o);return t.useMemo((function(){return"function"==typeof e?e(r):{...r,...e}}),[r,e])}function a(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:s(e.components),t.createElement(o.Provider,{value:r},e.children)}}}]);