"use strict";(self.webpackChunktiptop_site=self.webpackChunktiptop_site||[]).push([[4292],{682:(e,r,n)=>{n.r(r),n.d(r,{assets:()=>l,contentTitle:()=>a,default:()=>h,frontMatter:()=>s,metadata:()=>t,toc:()=>d});const t=JSON.parse('{"id":"orion/howtosetup","title":"How to set up?","description":"This page explains how to configure TipTop depending on the type of adaptive optics (AO) system you want to simulate.","source":"@site/docs/orion/howtosetup.md","sourceDirName":"orion","slug":"/orion/howtosetup","permalink":"/astro-tiptop-services/docs/orion/howtosetup","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"id":"howtosetup","title":"How to set up?","sidebar_label":"How to set up?"},"sidebar":"tipTopSidebar","previous":{"title":"Parameter fields","permalink":"/astro-tiptop-services/docs/orion/parameterfields"},"next":{"title":"Available AO instruments","permalink":"/astro-tiptop-services/docs/orion/aoinstruments"}}');var i=n(4848),o=n(8453);const s={id:"howtosetup",title:"How to set up?",sidebar_label:"How to set up?"},a=void 0,l={},d=[{value:"The telescope",id:"the-telescope",level:2},{value:"The atmosphere",id:"the-atmosphere",level:2},{value:"The adaptive optics system",id:"the-adaptive-optics-system",level:2},{value:"SCAO: Single Conjugate Adaptive Optics",id:"scao-single-conjugate-adaptive-optics",level:3},{value:"The wavefront sensor",id:"the-wavefront-sensor",level:4},{value:"The deformable mirror",id:"the-deformable-mirror",level:4},{value:"The real time controler",id:"the-real-time-controler",level:4},{value:"MCAO: Multi Conjugate Adaptive Optics",id:"mcao-multi-conjugate-adaptive-optics",level:3},{value:"The wavefront sensor",id:"the-wavefront-sensor-1",level:4},{value:"The deformable mirror",id:"the-deformable-mirror-1",level:4},{value:"The real time controler",id:"the-real-time-controler-1",level:4},{value:"LTAO: Laser Tomography Adaptive Optics",id:"ltao-laser-tomography-adaptive-optics",level:3},{value:"The wavefront sensor",id:"the-wavefront-sensor-2",level:4},{value:"The deformable mirror",id:"the-deformable-mirror-2",level:4},{value:"The real time controler",id:"the-real-time-controler-2",level:4},{value:"GLAO: Ground Layer Adaptive Optics",id:"glao-ground-layer-adaptive-optics",level:3},{value:"The wavefront sensor",id:"the-wavefront-sensor-3",level:4},{value:"The deformable mirror",id:"the-deformable-mirror-3",level:4},{value:"The real time controler",id:"the-real-time-controler-3",level:4}];function c(e){const r={a:"a",code:"code",h2:"h2",h3:"h3",h4:"h4",img:"img",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("p",{align:"justify",children:[(0,i.jsx)(r.p,{children:"This page explains how to configure TipTop depending on the type of adaptive optics (AO) system you want to simulate."}),(0,i.jsx)(r.p,{children:"Before diving into the configuration sections, you should first determine which AO system you intend to model. TipTop supports the following modes:"}),(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsx)(r.li,{children:(0,i.jsx)(r.a,{href:"https://www.eso.org/sci/facilities/develop/ao/ao_modes/.html#scao",children:"Single Conjugate Adaptive Optics"})}),"\n",(0,i.jsx)(r.li,{children:(0,i.jsx)(r.a,{href:"https://www.eso.org/sci/facilities/develop/ao/ao_modes/.html#mcao",children:"Multi Conjugate Adaptive Optics"})}),"\n",(0,i.jsx)(r.li,{children:(0,i.jsx)(r.a,{href:"https://www.eso.org/sci/facilities/develop/ao/ao_modes/.html#ltao",children:"Laser Tomography Adaptive Optics"})}),"\n",(0,i.jsx)(r.li,{children:(0,i.jsx)(r.a,{href:"https://www.eso.org/sci/facilities/develop/ao/ao_modes/.html#glao",children:"Ground Layer Adaptive Optics"})}),"\n"]}),(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"Note:"})," Regardless of the AO system, configuration always starts with defining the telescope and the atmospheric conditions."]})]}),"\n",(0,i.jsx)("p",{align:"center",children:(0,i.jsx)(r.p,{children:(0,i.jsx)(r.img,{src:n(3100).A+"",width:"301",height:"313"})})}),"\n",(0,i.jsx)(r.h2,{id:"the-telescope",children:"The telescope"}),"\n",(0,i.jsx)(r.p,{children:"This section contains the parameters related to the telescope:"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-python",children:"[telescope]\r\nTelescopeDiameter = 38.5\r\nZenithAngle = 30.0\r\nObscurationRatio = 0.28\r\nResolution = 480\n"})}),"\n",(0,i.jsx)(r.p,{children:"to the pupil:"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-python",children:"# path to the pupil model in .fits file - optional (if provided, the pupil model is interpolated) - default: ''\r\nPathPupil = 'data/EELT480pp0.0803m_obs0.283_spider2023.fits'\r\nPupilAngle = 0.0\n"})}),"\n",(0,i.jsx)(r.p,{children:"to additional aberrations (in the main path or NCP):"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-python",children:"PathStaticOn = '../P3/aoSystem/data/ELT_CALIBRATION/CombinedError_Wavefront_nm.fits'\r\nPathApodizer = ''\r\nPathStatModes = ''\n"})}),"\n",(0,i.jsx)(r.p,{children:"or:"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-python",children:"# extra error in the science FoV (error not included in TIPTOP like NCPA, optics quality, ...)\r\nextraErrorNm = 160\r\nextraErrorExp = -2\r\nextraErrorMin = 0\r\n# extra error in the technical FoV  (error not included in TIPTOP like NCPA, optics quality, ...)\r\nextraErrorLoNm = 132\r\nextraErrorLoExp = -2\r\nextraErrorLoMin = 0\n"})}),"\n",(0,i.jsx)(r.p,{children:"to windshake and additional tilt jitter:"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-python",children:"# ELT tip & tilt wind shake when wind speed on M2 is 8 m/s\r\nwindPsdFile = 'data/morfeo_windshake8ms_psd_2022_1k.fits'\r\n# jitter_FWHM --\x3e 10 nm RMS tip error is 0.505arcesc\r\njitter_FWHM = 3.5\n"})}),"\n",(0,i.jsx)(r.p,{children:"to the size of the technical field:"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-python",children:"TechnicalFoV = 160.0\n"})}),"\n",(0,i.jsx)(r.p,{children:"and to the global focus control:"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-python",children:"# ground layer focus is controlled with NGS WFS\r\nglFocusOnNGS = True\n"})}),"\n",(0,i.jsx)(r.h2,{id:"the-atmosphere",children:"The atmosphere"}),"\n",(0,i.jsx)(r.p,{children:"This section contains the atmospheric parameters, seeing (or r0), L0, Cn2 profile and wind profile:"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-python",children:"[atmosphere]\r\nWavelength = 500e-9\r\nSeeing = 0.8\r\nL0 = 22.0\r\nCn2Weights = [0.59, 0.02, 0.04, 0.06, 0.01, 0.05, 0.09, 0.04, 0.05, 0.05]\r\nCn2Heights = [30, 140, 281, 562, 1125, 2250, 4500, 7750, 11000, 14000]\r\nWindSpeed = [6.6, 5.9, 5.1, 4.5, 5.1, 8.3, 16.3, 10.2, 14.3, 17.5]\r\nWindDirection = [0., 0., 0., 0., 90., -90., -90., 90., 0., 0.]\n"})}),"\n",(0,i.jsx)(r.h2,{id:"the-adaptive-optics-system",children:"The adaptive optics system"}),"\n",(0,i.jsx)(r.h3,{id:"scao-single-conjugate-adaptive-optics",children:"SCAO: Single Conjugate Adaptive Optics"}),"\n",(0,i.jsx)(r.h4,{id:"the-wavefront-sensor",children:"The wavefront sensor"}),"\n",(0,i.jsxs)(r.p,{children:["The Wavefront Sensor in a ",(0,i.jsx)(r.strong,{children:"SCAO"})," system (natural guide star only) can be a Pyramid sensor:"]}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-python",children:"[sensor_HO]\r\n# WFS type - optional - default : Shack-Hartmann\r\nWfsType = 'Pyramid'\r\n# Spot modulation radius in lambda/D units for pyramid WFS - optional - default : None\r\nModulation = 3\r\n# HO WFS pixel scale in [mas] - required\r\nPixelScale = 220\r\n# Number of pixels per subaperture - required\r\nFieldOfView = 600\r\n# Flux return in [nph/frame/subaperture] - required\r\nNumberPhotons = [500]\r\n# read-out noise std in [e-] - required\r\nSigmaRON = 1.0\r\n# dark current[e-/s/pix] - optional - default: 0.0\r\nDark = 0.2\r\n# Sky background [e-/s/pix] - optional - default: 0.0\r\nSkyBackground = 0.6\r\n# excess noise factor - optional - default: 2.0\r\nExcessNoiseFactor = 1.0\r\n# Number of WFS lenslets - required\r\nNumberLenslets = [100]\n"})}),"\n",(0,i.jsx)(r.p,{children:"or a Shack-Hartmann sensor:"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-python",children:"[sensor_HO]\r\nWfsType = 'Shack-Hartmann'\r\nModulation = None\r\nPixelScale = 832\r\nFieldOfView = 6\r\nBinning = 1\r\nNumberPhotons = [100.0]\r\nSigmaRON = 0.2\r\nExcessNoiseFactor = 2.0\r\n# CoG computation algorithm - optional  -defaut:'wcog'\r\nAlgorithm = 'wcog'\r\n# Number of pixels for windiwing the low order WFS pixels - optional - default: 2\r\nWindowRadiusWCoG = 2\r\nNumberLenslets = [40]\n"})}),"\n",(0,i.jsx)(r.p,{children:"Then a section with the guide star must be present:"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-python",children:"[sources_HO]\r\n# Sensing wavelength for HO modes in meters - required\r\nWavelength = 950e-9\r\n# list of polar coordinates of the guide stars sources; zenith in arcsec and azimuth in degrees - optional - default [0.0]\r\nZenith = [0.0]\r\nAzimuth = [0.0]\r\n# altitude of the guide stars (0 if infinite) - optional - default: 0.0\r\nHeight = 0.0\n"})}),"\n",(0,i.jsx)(r.h4,{id:"the-deformable-mirror",children:"The deformable mirror"}),"\n",(0,i.jsx)("p",{align:"justify",children:(0,i.jsx)(r.p,{children:"The deformable mirror is used to achieve wavefront control and correction and this section contains the following parameters:"})}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-python",children:"[DM]\r\n# DM actuators pitch in meters - required\r\nNumberActuators = [80]\r\n# DM actuators pitch in meters - required\r\nDmPitchs = [0.38]\r\n# DM influence function model - optional - default: 'gaussian'\r\nInfModel = 'gaussian'\r\n# DM influence function model  mechanical coupling- optional - default: [0.2]\r\nInfCoupling = [0.2]\r\n# DM altitude in m - optional - default: [0.0]\r\nDmHeights = [600.0]\r\n# Zenith position in arcsec - optional - default: [0.0]\r\nOptimizationZenith = [0]\r\n# Azimuth in degrees - optional - default: [0.0]\r\nOptimizationAzimuth = [0]\r\n# Weights - optional - default: [1.0]\r\nOptimizationWeight  = [1]\r\n# Matrix Conditioning - optional - default: 1e2\r\nOptimizationConditioning = 1.0e2\r\n# Number of reconstructed layers for tomographic systems - optional - default: 10\r\nNumberReconstructedLayers= 10\r\n# Shape of the AO-corrected area - optional - default: 'circle'\r\nAoArea = 'circle'\n"})}),"\n",(0,i.jsx)(r.h4,{id:"the-real-time-controler",children:"The real time controler"}),"\n",(0,i.jsx)(r.p,{children:"This section contains the details of the control, the framerate and the delay:"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-python",children:"[RTC]\r\n# HO Loop gain - required\r\nLoopGain_HO = 0.5\r\n# HO loop frequency in [Hz] - required\r\nSensorFrameRate_HO = 500.0\r\n# HO loop frame delay - required\r\nLoopDelaySteps_HO = 1\n"})}),"\n",(0,i.jsx)(r.h3,{id:"mcao-multi-conjugate-adaptive-optics",children:"MCAO: Multi Conjugate Adaptive Optics"}),"\n",(0,i.jsxs)("p",{align:"justify",children:[(0,i.jsx)(r.h4,{id:"the-wavefront-sensor-1",children:"The wavefront sensor"}),(0,i.jsxs)(r.p,{children:["For an ",(0,i.jsx)(r.strong,{children:"MCAO"})," system with multiple NAtural Guide Stars (NGSs), the difference here is that ",(0,i.jsx)(r.code,{children:"NumberPhotons"})," and ",(0,i.jsx)(r.code,{children:"NumberLenslets"})," are vectors as are ",(0,i.jsx)(r.code,{children:"Zenith"})," and ",(0,i.jsx)(r.code,{children:"Azimuth"})," in the ",(0,i.jsx)(r.code,{children:"soruces_HO"})," section."]}),(0,i.jsx)(r.p,{children:"If the system have Laser Guide Stars (LGSs) and NGSs these sections are present:"})]}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-python",children:"[sources_LO]\r\nWavelength = [1650e-9]\r\nZenith = [66.6, 79.3, 69.0]\r\nAzimuth = [221.7, 321.2, 106.6]\r\n\r\n[sensor_LO]\r\nPixelScale = 16.0\r\nFieldOfView = 100\r\nBinning = 1\r\n# zero magnitude flux 8.17e11ph/s (H band)\r\n# magnitudes 10.7, 16.3, 14.5\r\n# 2x2 sub-apertures and 250 Hz framerate\r\n# --\x3e 8.17e11*10**(-[10.7,16.3,14.5]/2.5)/4/250.\r\nNumberPhotons = [42900,247,1300]\r\nSpotFWHM = [[0.0,0.0,0.0]]\r\nSigmaRON = 0.5\r\nDark = 40.0\r\nSkyBackground = 120.0\r\nGain = 1.0\r\nExcessNoiseFactor = 1.3\r\n# note 2x2 is required to provide focus control\r\n# (see glFocusOnNGS in telescope section)\r\nNumberLenslets = [2, 2, 2]\r\nAlgorithm = 'wcog'\r\nWindowRadiusWCoG = 'optimize'\r\nThresholdWCoG = 0.0\r\nNewValueThrPix = 0.0\r\nnoNoise = False\r\nfiltZernikeCov = True\n"})}),"\n",(0,i.jsx)(r.h4,{id:"the-deformable-mirror-1",children:"The deformable mirror"}),"\n",(0,i.jsx)("p",{align:"justify",children:(0,i.jsxs)(r.p,{children:["For an ",(0,i.jsx)(r.strong,{children:"MCAO"})," system with multiple DM, the difference here is that ",(0,i.jsx)(r.code,{children:"NumberActuators"}),", ",(0,i.jsx)(r.code,{children:"DmPitchs"}),", ",(0,i.jsx)(r.code,{children:"InfCoupling"})," and ",(0,i.jsx)(r.code,{children:"DmHeights"})," are vectors."]})}),"\n",(0,i.jsx)(r.h4,{id:"the-real-time-controler-1",children:"The real time controler"}),"\n",(0,i.jsx)(r.p,{children:"If the system have Laser Guide Stars (LGSs) and NGSs this section has the following parameters:"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-python",children:"LoopGain_LO = 'optimize'\r\nSensorFrameRate_LO = 250.0\r\nLoopDelaySteps_LO = 1\r\n\n"})}),"\n",(0,i.jsx)(r.h3,{id:"ltao-laser-tomography-adaptive-optics",children:"LTAO: Laser Tomography Adaptive Optics"}),"\n",(0,i.jsx)(r.h4,{id:"the-wavefront-sensor-2",children:"The wavefront sensor"}),"\n",(0,i.jsxs)(r.p,{children:["As for the ",(0,i.jsx)(r.strong,{children:"MCAO"})," system when LGSs and NGSs are present the sections ",(0,i.jsx)(r.code,{children:"[sources_LO]"})," and ",(0,i.jsx)(r.code,{children:"[sensor_LO]"})," must be added."]}),"\n",(0,i.jsx)(r.h4,{id:"the-deformable-mirror-2",children:"The deformable mirror"}),"\n",(0,i.jsxs)(r.p,{children:["Like for a ",(0,i.jsx)(r.strong,{children:"SCAO"})," system."]}),"\n",(0,i.jsx)(r.h4,{id:"the-real-time-controler-2",children:"The real time controler"}),"\n",(0,i.jsxs)(r.p,{children:["Like for a ",(0,i.jsx)(r.strong,{children:"MCAO"})," system with LGSs and NGSs."]}),"\n",(0,i.jsx)(r.h3,{id:"glao-ground-layer-adaptive-optics",children:"GLAO: Ground Layer Adaptive Optics"}),"\n",(0,i.jsx)(r.h4,{id:"the-wavefront-sensor-3",children:"The wavefront sensor"}),"\n",(0,i.jsxs)(r.p,{children:["Like for a ",(0,i.jsx)(r.strong,{children:"MCAO"})," system."]}),"\n",(0,i.jsx)(r.h4,{id:"the-deformable-mirror-3",children:"The deformable mirror"}),"\n",(0,i.jsxs)(r.p,{children:["Like for a ",(0,i.jsx)(r.strong,{children:"SCAO"})," system."]}),"\n",(0,i.jsx)(r.h4,{id:"the-real-time-controler-3",children:"The real time controler"}),"\n",(0,i.jsxs)(r.p,{children:["Like for a ",(0,i.jsx)(r.strong,{children:"MCAO"})," system."]})]})}function h(e={}){const{wrapper:r}={...(0,o.R)(),...e.components};return r?(0,i.jsx)(r,{...e,children:(0,i.jsx)(c,{...e})}):c(e)}},3100:(e,r,n)=>{n.d(r,{A:()=>t});const t=n.p+"assets/images/AO_tel-cb6965ae7c20d4166aaec4596dc365b4.png"},8453:(e,r,n)=>{n.d(r,{R:()=>s,x:()=>a});var t=n(6540);const i={},o=t.createContext(i);function s(e){const r=t.useContext(o);return t.useMemo((function(){return"function"==typeof e?e(r):{...r,...e}}),[r,e])}function a(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:s(e.components),t.createElement(o.Provider,{value:r},e.children)}}}]);